<!-- ADD TRANSACTION CARD -->
<div class="card mt-4 shadow-sm main-wrapper">
    <div class="card-body">
        <h3 class="card-title mb-4"><%= title %></h3>
        <form action="/transactions/add" method="POST">
            <div class="mb-3">
                <label for="type" class="form-label">Type:</label>
                <select name="type" id="type" class="form-select" required>
                    <option value="income" <%= type === "income" ? "selected" : "" %>>Income</option>
                    <option value="expense" <%= type === "expense" ? "selected" : "" %>>Expense</option>
                </select>
            </div>

            <div class="mb-3">
                <label for="amount" class="form-label">Amount:</label>
                <input type="number" id="amount" name="amount" class="form-control" required>
            </div>

            <div class="mb-3">
                <label for="category" class="form-label">Category:</label>
                <input type="text" id="category" name="category" class="form-control" required>
            </div>

            <div class="mb-3">
                <label for="date" class="form-label">Date:</label>
                <input type="date" id="date" name="date" class="form-control" required>
            </div>

            <div class="mb-3">
                <label for="note" class="form-label">Note:</label>
                <input type="text" id="note" name="note" class="form-control">
            </div>

            <button type="submit" class="btn btn-success w-100">Add Transaction</button>
        </form>
    </div>
</div>

<!-- TRANSACTION TABLE CARD -->
<div class="card mt-4 shadow-sm">
    <div class="card-body">
        <h2 class="card-title mb-4">Transactions</h2>
        <div class="table-responsive">
            <table class="table table-hover align-middle">
                <thead class="table-dark">
                    <tr>
                        <th>Date</th>
                        <th>Type</th>
                        <th>Amount</th>
                        <th>Category</th>
                        <th>Note</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <% transactions.forEach(transaction => { %>
                    <tr>
                        <td>
                            <%= (() => {
                                const date = new Date(transaction.date);
                                const day = date.getDate();
                                const month = date.toLocaleDateString("en-US", { month: "short" });
                                const year = date.getFullYear();
                                const weekday = date.toLocaleDateString("en-US", { weekday: "short" });
                                return `${day} ${month} ${year}, ${weekday}`;
                            })() %>
                        </td>
                        <td>
                            <span class="<%= transaction.type === 'income' ? 'text-success' : 'text-danger' %>">
                                <%= transaction.type %>
                            </span>
                        </td>
                        <td>‚Çπ <%= transaction.amount %></td>
                        <td><%= transaction.category %></td>
                        <td><%= transaction.note %></td>
                        <td>
                             <!-- <form action="/transactions/delete/<%= transaction._id %>" method="POST">
                                <button type="submit" class="btn btn-outline-danger btn-sm">Delete</button>
                            </form> -->
                             <div class="d-flex gap-2">
                              <form action="/transactions/delete/<%= transaction._id %>" method="POST">
                                <button type="submit" class="btn btn-outline-danger btn-sm">Delete</button>
                             </form>
                             <!-- <form action="/transactions/edit/<%= transaction._id %>" method="GET">
                             <button type="submit" class="btn btn-outline-primary btn-sm">Edit</button>
                             </form> -->
                             
                             <a href="/transactions/edit/<%= transaction._id %>" class="btn btn-warning btn-sm d-inline">Edit</a>
                        </td>
                      </td>
                    </tr>
                    <% }) %>
                </tbody>
            </table>

        </div>
    </div>
</div>
  <footer class="footer mt-5 py-3 text-center">
  <p class="mb-0">üí∞ Spend Wisely. Track Smartly.</p>
  <small><b>Built with ‚ù§Ô∏è by Divya!</b></small>
  </footer>